<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <title>Направления</title>
    <meta charset="UTF-8"/>
    <div th:replace="fragments/htmlFragments::header"></div>
    <link rel="stylesheet" href="/css/style.css"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-colorpicker/2.5.3/css/bootstrap-colorpicker.min.css"
          rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-colorpicker/2.5.3/js/bootstrap-colorpicker.min.js"></script>
    <script type="text/javascript" th:src="@{/js/choice-color-picker.js}"></script>
    <link href="/css/bootstrap-colorpicker.css" rel="stylesheet"/>
    <div th:replace="fragments/htmlFragments::custom-style"></div>
</head>
<body>
<div style="margin: 2%">
    <!--Навигационная панель-->
    <div th:replace="fragments/htmlFragments::top-navigation-panel"></div>
    <!--Основное содержание-->
    <div class="container-fluid">

        <div class="row">
            <br>
            <h5>
                <a href="#addCourse" data-toggle="modal" th:attr="data-target='#addCourse'" th:text="'Добавить новый курс..'"></a>
            </h5>
            <!-- Модалка для добавления курса-->
            <div class="modal fade" id="addCourse" th:attr="id='addCourse'">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button class="close" type="button" data-dismiss="modal">×</button>
                            <h4 class="modal-title" th:text="'Добавление нового курса.'"></h4>

                        </div>
                        <form>
                            <div class="modal-body">
                                <div class="center-block" style="width:400px" ;>
                                    <div class="form-group">
                                        <p align="center"><b>Введите имя курса:</b></p>
                                        <input class="form-control" type="text" name="courseName" placeholder="Введите имя нового курса"/>
                                        <br>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-default" type="button" data-dismiss="modal">
                                        Закрыть
                                    </button>
                                    <button class="btn btn-info" type="submit" formaction="/courses/add"
                                            formmethod="post">Добавить
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

           <br>
            <!--Courses table-->
            <div class="col-md-12 col-md-offset-0">
                <table class="table table-fixed table-sm">
                    <thead>
                    <tr>
<!--                        <th>ID</th>-->
<!--                        <th>Название курса</th>-->
<!--                        <th>Уровень обучения</th>-->
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="course : ${courses}">
<!--                        <td> <a href="#updateCourse" data-toggle="modal" th:attr="data-target='#'+${course.key.id}" th:text="${course.key.getId()}"></a></td>-->
                        <th> <a href="#updateCourse" data-toggle="modal" th:attr="data-target='#updateCourse'+${course.key.id}" th:text="'Курс: '+${course.key.name}"></a></th>
                        <td th:text="'Этап:'"></td>
                        <td th:each="stage : ${course.value}">


                                <a href="#updateStudentEducationStage" data-toggle="modal" th:attr="data-target='#'+${stage.getId()}" th:text="'#'+${stage.getEducationStageLevel()}+' - '+${stage.getEducationStageName()}"></a>


                            <!--Модалка для редактирования уровня обучения-->
                            <div class="modal fade" id="updateStudentEducationStage" th:attr="id=${stage.getId()}">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button class="close" type="button" data-dismiss="modal">×</button>
                                            <h4 class="modal-title" th:text="'Редактирование этапа обучения. Курс '+${stage.getCourse().name}"></h4>

                                        </div>
                                        <form>
                                            <div class="modal-body">
                                                <div class="center-block" style="width:400px" ;>
                                                    <div class="form-group">
                                                        <input class="form-control" id="disabledInput" type="text"
                                                               name="studentEducationStageId" th:attr="value=${stage.getId()}"
                                                               readonly="readonly"/>
                                                        <br>
                                                        <p align="center"><b>Уровень обучения:</b></p>
                                                        <input class="form-control" type="text" name="studentEducationStageLevel"
                                                               th:attr="value=${stage.getEducationStageLevel()}" placeholder="Введите этап обучения 0, 1 и т.д. (не обязательно)"/>
                                                        <br>
                                                        <p align="center"><b>Наименование уровня обучения:</b></p>
                                                        <input class="form-control" type="text" name="studentEducationStageName"
                                                               th:attr="value=${stage.getEducationStageName()}" placeholder="Введите наименование этапа обучения"/>
                                                        <br>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button class="btn btn-default" type="button" data-dismiss="modal">
                                                    Закрыть
                                                </button>
                                                <button class="btn btn-info" type="submit" formaction="/studenteducationstage/update"
                                                        formmethod="get">Редактировать
                                                </button>
                                                <a th:href="@{/studenteducationstage/delete/{id}(id=${stage.id})}" class="btn btn-info" role="button"
                                                        >Удалить
                                                </a>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </td>

                        <td>
                            <a href="#addEducationStageModal" data-toggle="modal" th:attr="data-target='#'+${course.key.name}" th:text="'Добавить этап..'"></a>

                            <!-- Модалка для добавление уровня обучения-->
                            <div class="modal fade" id="addEducationStageModal" th:attr="id=${course.key.name}">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button class="close" type="button" data-dismiss="modal">×</button>
                                            <h4 class="modal-title" th:text="'Добавление нового этапа обучения. Курс '+${course.key.name}"></h4>

                                        </div>
                                        <form>
                                            <div class="modal-body">
                                                <div class="center-block" style="width:400px" ;>
                                                    <div class="form-group">
                                                        <input class="form-control" id="disabledInput" type="text"
                                                               name="courseId" th:attr="value=${course.key.id}"
                                                               readonly="readonly"/>
                                                        <br>
                                                        <p align="center"><b>Уровень обучения:</b></p>
                                                        <input class="form-control" type="text" name="studentEducationStageLevel"
                                                               placeholder="Введите этап обучения 0, 1 и т.д. (не обязательно)"/>
                                                        <br>
                                                        <p align="center"><b>Наименование этапа обучения:</b></p>
                                                        <input class="form-control" type="text" name="studentEducationStageName"
                                                               placeholder="Введите наименование этапа обучения"/>
                                                        <br>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button class="btn btn-default" type="button" data-dismiss="modal">
                                                    Закрыть
                                                </button>
                                                <button class="btn btn-info" type="submit" formaction="/studenteducationstage/add"
                                                        formmethod="post">Добавить
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </td>

                        <!--Модалка для редактирования курса обучения-->
                        <td>
                            <div class="modal fade" id="updateCourse" th:attr="id='updateCourse'+${course.key.id}">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button class="close" type="button" data-dismiss="modal">×</button>
                                            <h4 class="modal-title">Редактирование курса</h4>
                                        </div>
                                        <form>
                                            <div class="modal-body">
                                                <div class="center-block" style="width:400px" ;>
                                                    <div class="form-group">
                                                        <input class="form-control" id="disabledInput" type="text"
                                                               name="courseId" th:attr="value=${course.key.id}"
                                                               readonly="readonly"/>
                                                        <br>
                                                        <p align="center"><b>Наименование курса:</b></p>
                                                        <input class="form-control" type="text" name="courseName"
                                                               th:attr="value=${course.key.name}" placeholder="Enter name"/>
                                                        <br>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button class="btn btn-default" type="button" data-dismiss="modal">
                                                    Закрыть
                                                </button>
                                                <button class="btn btn-info" type="submit" formaction="/courses/update"
                                                        formmethod="post">Редактировать
                                                </button>
                                                <button class="btn btn-info" type="submit" name="delete"
                                                        th:attr="value=${course.key.id}" formaction="/courses/delete"
                                                        formmethod="post">Удалить
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </td>

                        <!--Кнопка перехода к странице управления наборами-->
                        <td>
                            <a class="btn btn-info btn-lg" type="button" th:href="@{/courses/set(id=${course.id})}" >Наборы</a>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <table class="table  table-hover">
                    <td>*нажмите на элемент таблицы для редактирования</td>
                </table>
            </div>
        </div>
    </div>
</div>
</div>


<script type="text/javascript" th:src="@{/js/boards.js}"></script>
</body>
</html>